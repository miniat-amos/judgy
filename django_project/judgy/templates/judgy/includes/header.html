<header class="bg-body-secondary fixed-top" style="height: 3.75rem">
  <div class="h-100 mx-5 px-5">
    <div class="align-items-stretch d-flex h-100">
      <div class="d-flex justify-content-start w-100">
        <a class="text-decoration-none" href="{% url 'judgy:home' %}">
          <h1>judgy</h1>
        </a>
      </div>
      <div class="d-flex justify-content-end w-100 align-items-center">
        {% include 'judgy/includes/search.html' %}

          {% if user.is_authenticated %}
            <a href="{% url 'notifications:notification_center' %}"  style="
              border-radius: 50%;
              padding: 0.5rem;
              margin-left: 0.75rem;
              width: 3rem;
              height: 3rem;
              display: flex;
              justify-content: center;
              align-items: center;
              position: relative;
            "
              class="notification-bell">
              <i class="bi bi-bell" style="font-size: 1.5rem"></i> 
              <span class="notification-indicator"></span>
            </a>
          {% endif %}

        <!-- Profile Icon -->
        <div class="dropdown ms-3">
          <button
            class="btn profile-icon"
            data-bs-toggle="dropdown"
            style="
              border-radius: 50%;
              padding: 0.5rem;
              width: 3rem;
              height: 3rem;
              display: flex;
              justify-content: center;
              align-items: center;
            "
          >
            <i class="bi bi-person" style="font-size: 1.5rem"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            {% if user.is_authenticated %}
            <li>
              <a
                class="align-items-center d-flex dropdown-item"
                href="{% url 'judgy:home' %}"
              >
                <i class="bi bi-person me-3" style="font-size: 1.5rem"></i>
                <div>
                  <div>{{ user.first_name }} {{ user.last_name }}</div>
                  <div>{{ user.email }}</div>
                </div>
              </a>
            </li>
            <li><hr class="dropdown-divider" /></li>

            <li>
              <a
                class="align-items-center d-flex dropdown-item"
                href="{% url 'judgy:logout' %}"
              >
                <i
                  class="bi bi-box-arrow-right me-3"
                  style="font-size: 1.5rem"
                ></i>
                Log Out
              </a>
            </li>
            {% else %}
            <li>
              <a class="dropdown-item" href="{% url 'judgy:register' %}">
                Create Account
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="{% url 'judgy:login' %}">
                Log In
              </a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<style>
  /* Custom styles for profile icon */
  .profile-icon {
    border: 2px solid rgba(255, 255, 255, 0.5); /* Add a visible border */
    background-color: transparent; /* Ensure no background color */
    transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
  }

  .profile-icon:hover {
    background-color: rgba(255, 255, 255, 0.1); /* Subtle hover effect */
    border-color: rgba(255, 255, 255, 0.8); /* Change border color on hover */
  }

  .profile-icon:focus {
    outline: none; /* Remove default focus outline */
    border-color: rgba(255, 255, 255, 1); /* Highlight border on focus */
  }

  .notification-indicator {
    position: absolute;
    top: 0.35rem;
    right: 0.3rem;
    width: 0.5rem;
    height: 0.5rem;
    border-radius: 50%;
    background-color: #0d6efd;
    box-shadow: 0 0 6px rgba(13, 110, 253, 0.75);
    opacity: 0;
    transform: scale(0.5);
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
  }

  .notification-indicator.show {
    opacity: 1;
    transform: scale(1);
    animation: notification-pulse 1.4s ease-in-out infinite;
  }

  @keyframes notification-pulse {
    0% {
      box-shadow: 0 0 6px rgba(13, 110, 253, 0.75);
      transform: scale(1);
    }
    50% {
      box-shadow: 0 0 12px rgba(13, 110, 253, 0.9);
      transform: scale(1.15);
    }
    100% {
      box-shadow: 0 0 6px rgba(13, 110, 253, 0.75);
      transform: scale(1);
    }
  }

  /* Custom styles for notification bell */
  .notification-bell {
    border: 2px solid transparent; /* Add a visible border */
    background-color: transparent; /* Ensure no background color */
    transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
  }

  .notification-bell:hover {
    background-color: rgba(255, 255, 255, 0.1); /* Subtle hover effect */
    border-color: rgba(255, 255, 255, 0.8); /* Change border color on hover */
  }

  .notification-bell:focus {
    outline: none; /* Remove default focus outline */
    border-color: rgba(255, 255, 255, 1); /* Highlight border on focus */
  }
</style>
